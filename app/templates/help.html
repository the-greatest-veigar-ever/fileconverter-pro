{% extends "base.html" %}

{% block title %}Help Center - {{ app_name }}{% endblock %}

{% block meta_description %}Get help with {{ app_name }}. Learn how to convert files, troubleshoot issues, and make the most of our file conversion service.{% endblock %}

{% block body_class %}help-page{% endblock %}

{% block content %}
<!-- Help Hero Section -->
<section class="help-hero">
    <div class="container">
        <div class="help-hero-content">
            <h1 class="help-hero-title">How can we help you?</h1>
            <p class="help-hero-subtitle">
                Find answers to common questions and learn how to use {{ app_name }} effectively
            </p>
            
            <!-- Search Box -->
            <div class="help-search">
                <div class="search-input-container">
                    <i data-feather="search" class="search-icon"></i>
                    <input type="text" placeholder="Search for help topics..." class="search-input" id="help-search">
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Quick Help Topics -->
<section class="quick-help-section">
    <div class="container">
        <h2 class="section-title">Popular Help Topics</h2>
        
        <div class="help-topics-grid">
            {% for topic in help_topics %}
            <div class="help-topic-card">
                <div class="topic-icon">
                    <i data-feather="{{ topic.icon }}"></i>
                </div>
                <h3 class="topic-title">{{ topic.title }}</h3>
                <p class="topic-description">{{ topic.description }}</p>
                <a href="#{{ topic.title | lower | replace(' ', '-') }}" class="topic-link">
                    Learn More <i data-feather="arrow-right"></i>
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- FAQ Section -->
<section class="faq-section">
    <div class="container">
        <h2 class="section-title">Frequently Asked Questions</h2>
        
        <div class="faq-container">
            {% for item in faq %}
            <div class="faq-item">
                <button class="faq-question" onclick="toggleFaq(this)">
                    <span>{{ item.question }}</span>
                    <i data-feather="chevron-down" class="faq-chevron"></i>
                </button>
                <div class="faq-answer">
                    <p>{{ item.answer }}</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Getting Started Guide -->
<section class="getting-started-section" id="getting-started">
    <div class="container">
        <h2 class="section-title">Getting Started</h2>
        
        <div class="steps-container">
            <div class="step-item">
                <div class="step-number">1</div>
                <div class="step-content">
                    <h3 class="step-title">Upload Your Files</h3>
                    <p class="step-description">
                        Drag and drop your files onto the upload area, or click to browse your computer. 
                        You can upload up to {{ max_files_per_batch }} files at once, with each file up to {{ max_file_size_mb }}MB.
                    </p>
                    <div class="step-tips">
                        <strong>Tips:</strong>
                        <ul>
                            <li>Support for {{ total_supported_formats }}+ file formats</li>
                            <li>Files are automatically validated for security</li>
                            <li>Preview images are generated automatically</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="step-item">
                <div class="step-number">2</div>
                <div class="step-content">
                    <h3 class="step-title">Choose Output Format</h3>
                    <p class="step-description">
                        Select the format you want to convert to. Formats are organized by category 
                        (images, videos, audio, documents) to make selection easier.
                    </p>
                    <div class="step-tips">
                        <strong>Popular conversions:</strong>
                        <ul>
                            <li>Images: JPG → PNG, PNG → WebP, HEIC → JPG</li>
                            <li>Videos: MOV → MP4, AVI → MP4, MP4 → WebM</li>
                            <li>Audio: WAV → MP3, FLAC → MP3, M4A → MP3</li>
                            <li>Documents: DOC → PDF, PDF → TXT, DOCX → PDF</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="step-item">
                <div class="step-number">3</div>
                <div class="step-content">
                    <h3 class="step-title">Adjust Settings (Optional)</h3>
                    <p class="step-description">
                        Customize quality, resolution, compression, and other format-specific options 
                        to get the perfect output for your needs.
                    </p>
                    <div class="step-tips">
                        <strong>Available options:</strong>
                        <ul>
                            <li>Quality settings (High, Medium, Low, Custom)</li>
                            <li>Resolution control (4K, 1080p, 720p, Custom)</li>
                            <li>Compression levels</li>
                            <li>Format-specific optimizations</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="step-item">
                <div class="step-number">4</div>
                <div class="step-content">
                    <h3 class="step-title">Convert & Download</h3>
                    <p class="step-description">
                        Click "Convert" to start the process. You can track progress in real-time 
                        and download individual files or all files as a ZIP archive.
                    </p>
                    <div class="step-tips">
                        <strong>What happens next:</strong>
                        <ul>
                            <li>Real-time conversion progress tracking</li>
                            <li>Individual file download links</li>
                            <li>Bulk download as ZIP file</li>
                            <li>Files automatically deleted after 24 hours</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Supported Formats -->
<section class="supported-formats-section" id="supported-formats">
    <div class="container">
        <h2 class="section-title">Supported File Formats</h2>
        
        <div class="format-categories-help">
            <div class="format-category-help">
                <div class="category-header">
                    <i data-feather="image" class="category-icon"></i>
                    <h3>Images</h3>
                    <span class="format-count">20+ formats</span>
                </div>
                <div class="format-list">
                    <span class="format-tag">JPG</span>
                    <span class="format-tag">PNG</span>
                    <span class="format-tag">GIF</span>
                    <span class="format-tag">WebP</span>
                    <span class="format-tag">HEIC</span>
                    <span class="format-tag">SVG</span>
                    <span class="format-tag">TIFF</span>
                    <span class="format-tag">BMP</span>
                    <span class="format-tag more">+12 more</span>
                </div>
            </div>
            
            <div class="format-category-help">
                <div class="category-header">
                    <i data-feather="video" class="category-icon"></i>
                    <h3>Videos</h3>
                    <span class="format-count">15+ formats</span>
                </div>
                <div class="format-list">
                    <span class="format-tag">MP4</span>
                    <span class="format-tag">AVI</span>
                    <span class="format-tag">MOV</span>
                    <span class="format-tag">WebM</span>
                    <span class="format-tag">MKV</span>
                    <span class="format-tag">WMV</span>
                    <span class="format-tag">FLV</span>
                    <span class="format-tag more">+8 more</span>
                </div>
            </div>
            
            <div class="format-category-help">
                <div class="category-header">
                    <i data-feather="music" class="category-icon"></i>
                    <h3>Audio</h3>
                    <span class="format-count">12+ formats</span>
                </div>
                <div class="format-list">
                    <span class="format-tag">MP3</span>
                    <span class="format-tag">WAV</span>
                    <span class="format-tag">FLAC</span>
                    <span class="format-tag">AAC</span>
                    <span class="format-tag">OGG</span>
                    <span class="format-tag">M4A</span>
                    <span class="format-tag more">+6 more</span>
                </div>
            </div>
            
            <div class="format-category-help">
                <div class="category-header">
                    <i data-feather="file-text" class="category-icon"></i>
                    <h3>Documents</h3>
                    <span class="format-count">10+ formats</span>
                </div>
                <div class="format-list">
                    <span class="format-tag">PDF</span>
                    <span class="format-tag">DOCX</span>
                    <span class="format-tag">TXT</span>
                    <span class="format-tag">RTF</span>
                    <span class="format-tag">EPUB</span>
                    <span class="format-tag more">+5 more</span>
                </div>
            </div>
        </div>
        
        <div class="help-cta">
            <p>Need support for a specific format?</p>
            <a href="{{ url_for('main.formats') }}" class="btn btn-primary">
                View All Formats
            </a>
        </div>
    </div>
</section>

<!-- Troubleshooting -->
<section class="troubleshooting-section" id="troubleshooting">
    <div class="container">
        <h2 class="section-title">Troubleshooting</h2>
        
        <div class="troubleshooting-grid">
            <div class="trouble-item">
                <div class="trouble-icon">
                    <i data-feather="upload"></i>
                </div>
                <h3 class="trouble-title">Upload Issues</h3>
                <div class="trouble-content">
                    <p><strong>File too large:</strong> Maximum file size is {{ max_file_size_mb }}MB. Try compressing your file first.</p>
                    <p><strong>Upload fails:</strong> Check your internet connection and try again. Large files may take longer to upload.</p>
                    <p><strong>File rejected:</strong> Ensure your file is in a supported format and isn't corrupted.</p>
                </div>
            </div>
            
            <div class="trouble-item">
                <div class="trouble-icon">
                    <i data-feather="alert-triangle"></i>
                </div>
                <h3 class="trouble-title">Conversion Problems</h3>
                <div class="trouble-content">
                    <p><strong>Conversion fails:</strong> The file might be corrupted or in an unsupported variant of the format.</p>
                    <p><strong>Poor quality output:</strong> Try using higher quality settings or check if the source file quality is sufficient.</p>
                    <p><strong>Takes too long:</strong> Large files and high-quality settings require more processing time.</p>
                </div>
            </div>
            
            <div class="trouble-item">
                <div class="trouble-icon">
                    <i data-feather="download"></i>
                </div>
                <h3 class="trouble-title">Download Issues</h3>
                <div class="trouble-content">
                    <p><strong>Download link broken:</strong> Files are automatically deleted after 24 hours. You may need to convert again.</p>
                    <p><strong>Incomplete download:</strong> Try downloading again or use a different browser.</p>
                    <p><strong>Can't open file:</strong> Ensure you have the right software to open the converted format.</p>
                </div>
            </div>
            
            <div class="trouble-item">
                <div class="trouble-icon">
                    <i data-feather="globe"></i>
                </div>
                <h3 class="trouble-title">Browser Issues</h3>
                <div class="trouble-content">
                    <p><strong>Page not loading:</strong> Try refreshing the page or clearing your browser cache.</p>
                    <p><strong>Features not working:</strong> Enable JavaScript and ensure you're using a modern browser.</p>
                    <p><strong>Slow performance:</strong> Close other browser tabs and disable unnecessary extensions.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Contact Support -->
<section class="contact-support-section">
    <div class="container">
        <div class="contact-support-content">
            <h2 class="contact-title">Still Need Help?</h2>
            <p class="contact-description">
                Can't find what you're looking for? Our support team is here to help you with any questions or issues.
            </p>
            
            <div class="contact-options">
                <div class="contact-option">
                    <div class="contact-icon">
                        <i data-feather="mail"></i>
                    </div>
                    <div class="contact-details">
                        <h3>Email Support</h3>
                        <p>Get help via email within 24 hours</p>
                        <a href="mailto:support@fileconverter.pro" class="contact-link">support@fileconverter.pro</a>
                    </div>
                </div>
                
                <div class="contact-option">
                    <div class="contact-icon">
                        <i data-feather="message-circle"></i>
                    </div>
                    <div class="contact-details">
                        <h3>Community Forum</h3>
                        <p>Join our community for tips and discussions</p>
                        <a href="#" class="contact-link">Visit Forum</a>
                    </div>
                </div>
                
                <div class="contact-option">
                    <div class="contact-icon">
                        <i data-feather="book"></i>
                    </div>
                    <div class="contact-details">
                        <h3>Documentation</h3>
                        <p>Detailed guides and API documentation</p>
                        <a href="#" class="contact-link">Read Docs</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_css %}
<style>
.help-hero {
    background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
    color: white;
    padding: var(--space-20) 0 var(--space-16);
    text-align: center;
}

.help-hero-title {
    font-size: var(--font-size-5xl);
    font-weight: var(--font-weight-bold);
    margin-bottom: var(--space-4);
}

.help-hero-subtitle {
    font-size: var(--font-size-xl);
    opacity: 0.9;
    margin-bottom: var(--space-8);
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
}

.help-search {
    max-width: 500px;
    margin: 0 auto;
}

.search-input-container {
    position: relative;
    display: flex;
    align-items: center;
}

.search-icon {
    position: absolute;
    left: var(--space-4);
    color: var(--color-text-muted);
    z-index: 1;
}

.search-input {
    width: 100%;
    padding: var(--space-4) var(--space-4) var(--space-4) var(--space-12);
    border: none;
    border-radius: var(--radius-xl);
    font-size: var(--font-size-lg);
    background: white;
    box-shadow: var(--shadow-lg);
}

.help-topics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-6);
    margin-top: var(--space-12);
}

.help-topic-card {
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-xl);
    padding: var(--space-8);
    text-align: center;
    transition: var(--transition-normal);
}

.help-topic-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
}

.topic-icon {
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
    border-radius: var(--radius-xl);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto var(--space-6);
    color: white;
}

.faq-section {
    background: var(--color-background-alt);
    padding: var(--space-20) 0;
}

.faq-container {
    max-width: 800px;
    margin: 0 auto;
}

.faq-item {
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-4);
    overflow: hidden;
}

.faq-question {
    width: 100%;
    padding: var(--space-6);
    background: var(--color-surface);
    border: none;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-medium);
    text-align: left;
    transition: var(--transition-fast);
}

.faq-question:hover {
    background: var(--color-background-alt);
}

.faq-chevron {
    transition: var(--transition-fast);
}

.faq-item.active .faq-chevron {
    transform: rotate(180deg);
}

.faq-answer {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
    background: var(--color-background-alt);
}

.faq-item.active .faq-answer {
    max-height: 200px;
}

.faq-answer p {
    padding: var(--space-6);
    margin: 0;
    color: var(--color-text-secondary);
}

.steps-container {
    display: flex;
    flex-direction: column;
    gap: var(--space-12);
    margin-top: var(--space-12);
}

.step-item {
    display: flex;
    gap: var(--space-6);
    align-items: flex-start;
}

.step-number {
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
    color: white;
    border-radius: var(--radius-full);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-bold);
    flex-shrink: 0;
}

.step-content {
    flex: 1;
}

.step-title {
    font-size: var(--font-size-2xl);
    font-weight: var(--font-weight-semibold);
    margin-bottom: var(--space-3);
}

.step-description {
    color: var(--color-text-secondary);
    margin-bottom: var(--space-4);
}

.step-tips {
    background: var(--color-background-alt);
    padding: var(--space-4);
    border-radius: var(--radius-lg);
    border-left: 4px solid var(--color-primary);
}

.step-tips ul {
    margin: var(--space-2) 0 0 var(--space-4);
    color: var(--color-text-secondary);
}

.format-categories-help {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: var(--space-8);
    margin-top: var(--space-12);
}

.format-category-help {
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-xl);
    padding: var(--space-6);
}

.category-header {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    margin-bottom: var(--space-4);
}

.category-icon {
    color: var(--color-primary);
}

.format-count {
    margin-left: auto;
    color: var(--color-text-muted);
    font-size: var(--font-size-sm);
}

.format-list {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
}

.format-tag {
    display: inline-block;
    padding: var(--space-1) var(--space-3);
    background: var(--color-background-alt);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
}

.format-tag.more {
    color: var(--color-text-muted);
    font-style: italic;
}

.troubleshooting-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: var(--space-8);
    margin-top: var(--space-12);
}

.trouble-item {
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-xl);
    padding: var(--space-6);
}

.trouble-icon {
    width: 50px;
    height: 50px;
    background: var(--color-error);
    color: white;
    border-radius: var(--radius-lg);
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: var(--space-4);
}

.trouble-content p {
    margin-bottom: var(--space-3);
    font-size: var(--font-size-sm);
}

.trouble-content strong {
    color: var(--color-text-primary);
}

.contact-support-section {
    background: var(--color-background-alt);
    padding: var(--space-20) 0;
    text-align: center;
}

.contact-options {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--space-8);
    margin-top: var(--space-12);
}

.contact-option {
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-xl);
    padding: var(--space-8);
    text-align: center;
}

.contact-icon {
    width: 60px;
    height: 60px;
    background: var(--color-primary);
    color: white;
    border-radius: var(--radius-xl);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto var(--space-4);
}

.contact-link {
    color: var(--color-primary);
    text-decoration: none;
    font-weight: var(--font-weight-medium);
}

.contact-link:hover {
    text-decoration: underline;
}

@media (max-width: 768px) {
    .step-item {
        flex-direction: column;
        text-align: center;
    }
    
    .help-hero-title {
        font-size: var(--font-size-3xl);
    }
}
</style>
{% endblock %}

{% block extra_js %}
<script>
function toggleFaq(button) {
    const faqItem = button.parentElement;
    const isActive = faqItem.classList.contains('active');
    
    // Close all FAQ items
    document.querySelectorAll('.faq-item').forEach(item => {
        item.classList.remove('active');
    });
    
    // Open clicked item if it wasn't active
    if (!isActive) {
        faqItem.classList.add('active');
    }
}

// Search functionality
document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('help-search');
    if (searchInput) {
        searchInput.addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            
            // Search in FAQ items
            const faqItems = document.querySelectorAll('.faq-item');
            faqItems.forEach(item => {
                const question = item.querySelector('.faq-question span').textContent.toLowerCase();
                const answer = item.querySelector('.faq-answer p').textContent.toLowerCase();
                
                if (question.includes(searchTerm) || answer.includes(searchTerm)) {
                    item.style.display = 'block';
                } else {
                    item.style.display = searchTerm ? 'none' : 'block';
                }
            });
            
            // Search in help topics
            const topicCards = document.querySelectorAll('.help-topic-card');
            topicCards.forEach(card => {
                const title = card.querySelector('.topic-title').textContent.toLowerCase();
                const description = card.querySelector('.topic-description').textContent.toLowerCase();
                
                if (title.includes(searchTerm) || description.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = searchTerm ? 'none' : 'block';
                }
            });
        });
    }
});
</script>
{% endblock %}