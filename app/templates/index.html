{% extends "base.html" %}

{% block title %}{{ app_name }} - Convert Any File Format Online{% endblock %}

{% block meta_description %}Convert files online with {{ app_name }}. Support for {{ total_supported_formats }}+ formats including images, videos, audio, documents. Fast, secure, and free file conversion.{% endblock %}

{% block body_class %}homepage{% endblock %}

{% block extra_css %}
<style>
/* Hero section specific styles */
.hero-gradient {
    background: linear-gradient(135deg, 
        hsl(var(--primary-hue), 70%, 55%) 0%,
        hsl(var(--secondary-hue), 65%, 60%) 50%,
        hsl(var(--accent-hue), 60%, 65%) 100%);
}
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero hero-gradient">
    <div class="hero-content container">
        <div class="hero-text">
            <h1 class="hero-title">
                <span class="hero-title-line">Convert Any File</span>
                <span class="hero-title-line hero-title-highlight">Instantly & Free</span>
            </h1>
            <p class="hero-subtitle">
                Professional file conversion with support for <strong>{{ total_supported_formats }}+ formats</strong>. 
                Transform images, videos, audio, documents, and more with lightning speed.
            </p>
            <div class="hero-features">
                <div class="hero-feature">
                    <i data-feather="zap" class="hero-feature-icon"></i>
                    <span>Lightning Fast</span>
                </div>
                <div class="hero-feature">
                    <i data-feather="shield" class="hero-feature-icon"></i>
                    <span>100% Secure</span>
                </div>
                <div class="hero-feature">
                    <i data-feather="heart" class="hero-feature-icon"></i>
                    <span>Always Free</span>
                </div>
            </div>
        </div>
        
        <div class="hero-visual">
            <div class="conversion-preview">
                <div class="conversion-preview-item">
                    <div class="file-icon">
                        <i data-feather="image"></i>
                    </div>
                    <div class="conversion-arrow">
                        <i data-feather="arrow-right"></i>
                    </div>
                    <div class="file-icon converted">
                        <i data-feather="file"></i>
                    </div>
                </div>
                <div class="conversion-preview-item">
                    <div class="file-icon">
                        <i data-feather="video"></i>
                    </div>
                    <div class="conversion-arrow">
                        <i data-feather="arrow-right"></i>
                    </div>
                    <div class="file-icon converted">
                        <i data-feather="play"></i>
                    </div>
                </div>
                <div class="conversion-preview-item">
                    <div class="file-icon">
                        <i data-feather="music"></i>
                    </div>
                    <div class="conversion-arrow">
                        <i data-feather="arrow-right"></i>
                    </div>
                    <div class="file-icon converted">
                        <i data-feather="headphones"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Scroll Indicator -->
    <div class="scroll-indicator">
        <div class="scroll-indicator-line"></div>
        <span class="scroll-indicator-text">Start Converting</span>
        <i data-feather="chevron-down" class="scroll-indicator-icon"></i>
    </div>
</section>

<!-- Conversion Interface -->
<section class="conversion-section" id="converter">
    <div class="container">
        <div class="conversion-interface">
            <div class="conversion-header">
                <h2 class="conversion-title">Choose Your Files</h2>
                <p class="conversion-description">
                    Select up to {{ max_files_per_batch }} files (max {{ max_file_size_mb }}MB each) to convert
                </p>
            </div>
            
            <!-- File Upload Zone -->
            {% include 'components/upload_zone.html' %}
            
            <!-- Format Selection -->
            <div class="format-selection" id="format-selection" style="display: none;">
                <h3 class="format-selection-title">Choose Output Format</h3>
                
                <div class="format-categories">
                    {% for category, formats in supported_formats.items() %}
                    <div class="format-category" data-category="{{ category }}">
                        <button class="format-category-btn" data-category="{{ category }}">
                            <div class="format-category-icon">
                                {% if category == 'image' %}
                                    <i data-feather="image"></i>
                                {% elif category == 'video' %}
                                    <i data-feather="video"></i>
                                {% elif category == 'audio' %}
                                    <i data-feather="music"></i>
                                {% elif category == 'document' %}
                                    <i data-feather="file-text"></i>
                                {% elif category == 'presentation' %}
                                    <i data-feather="monitor"></i>
                                {% elif category == 'spreadsheet' %}
                                    <i data-feather="grid"></i>
                                {% elif category == 'archive' %}
                                    <i data-feather="archive"></i>
                                {% elif category == 'font' %}
                                    <i data-feather="type"></i>
                                {% else %}
                                    <i data-feather="file"></i>
                                {% endif %}
                            </div>
                            <span class="format-category-name">{{ category.title() }}</span>
                            <span class="format-category-count">{{ formats|length }} formats</span>
                        </button>
                        
                        <div class="format-options" id="formats-{{ category }}">
                            {% for format in formats %}
                            <button class="format-option" data-format="{{ format }}">
                                <span class="format-name">.{{ format.upper() }}</span>
                                <span class="format-description">{{ format.title() }} Format</span>
                            </button>
                            {% endfor %}
                        </div>
                    </div>
                    {% endfor %}
                </div>
                
                <!-- Quick Format Selection -->
                <div class="quick-formats">
                    <h4 class="quick-formats-title">Popular Formats</h4>
                    <div class="quick-formats-grid">
                        <button class="quick-format" data-format="pdf">
                            <i data-feather="file-text"></i>
                            <span>PDF</span>
                        </button>
                        <button class="quick-format" data-format="jpg">
                            <i data-feather="image"></i>
                            <span>JPG</span>
                        </button>
                        <button class="quick-format" data-format="png">
                            <i data-feather="image"></i>
                            <span>PNG</span>
                        </button>
                        <button class="quick-format" data-format="mp4">
                            <i data-feather="video"></i>
                            <span>MP4</span>
                        </button>
                        <button class="quick-format" data-format="mp3">
                            <i data-feather="music"></i>
                            <span>MP3</span>
                        </button>
                        <button class="quick-format" data-format="docx">
                            <i data-feather="file-text"></i>
                            <span>DOCX</span>
                        </button>
                        <button class="quick-format" data-format="xlsx">
                            <i data-feather="grid"></i>
                            <span>XLSX</span>
                        </button>
                        <button class="quick-format" data-format="zip">
                            <i data-feather="archive"></i>
                            <span>ZIP</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Conversion Options -->
            <div class="conversion-options" id="conversion-options" style="display: none;">
                <h3 class="options-title">Conversion Settings</h3>
                
                <div class="options-grid">
                    <!-- Quality Settings -->
                    <div class="option-group" id="quality-group">
                        <label class="option-label">Quality</label>
                        <div class="option-control">
                            <input type="range" id="quality-slider" min="1" max="100" value="85" class="slider">
                            <span class="option-value" id="quality-value">85%</span>
                        </div>
                    </div>
                    
                    <!-- Resolution Settings -->
                    <div class="option-group" id="resolution-group">
                        <label class="option-label">Resolution</label>
                        <select id="resolution-select" class="option-select">
                            <option value="">Keep Original</option>
                            <option value="1920x1080">1920x1080 (Full HD)</option>
                            <option value="1280x720">1280x720 (HD)</option>
                            <option value="854x480">854x480 (SD)</option>
                            <option value="640x360">640x360 (Low)</option>
                        </select>
                    </div>
                    
                    <!-- Advanced Toggle -->
                    <div class="option-group full-width">
                        <button type="button" class="advanced-toggle" id="advanced-toggle">
                            <i data-feather="settings"></i>
                            <span>Advanced Settings</span>
                            <i data-feather="chevron-down" class="toggle-icon"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Advanced Options (Hidden by default) -->
                <div class="advanced-options" id="advanced-options" style="display: none;">
                    <div class="options-grid">
                        <div class="option-group">
                            <label class="option-label">Bitrate</label>
                            <input type="text" id="bitrate-input" placeholder="e.g., 192k" class="option-input">
                        </div>
                        
                        <div class="option-group">
                            <label class="option-label">Frame Rate</label>
                            <select id="fps-select" class="option-select">
                                <option value="">Auto</option>
                                <option value="24">24 fps</option>
                                <option value="30">30 fps</option>
                                <option value="60">60 fps</option>
                            </select>
                        </div>
                        
                        <div class="option-group">
                            <label class="option-label">Codec</label>
                            <select id="codec-select" class="option-select">
                                <option value="">Auto</option>
                                <option value="h264">H.264</option>
                                <option value="h265">H.265</option>
                                <option value="vp9">VP9</option>
                            </select>
                        </div>
                        
                        <div class="option-group">
                            <label class="option-label">Optimize for</label>
                            <select id="optimize-select" class="option-select">
                                <option value="balanced">Balanced</option>
                                <option value="quality">Quality</option>
                                <option value="size">File Size</option>
                                <option value="speed">Speed</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- File List -->
            {% include 'components/file_list.html' %}
            
            <!-- Convert Button -->
            <div class="convert-action" id="convert-action" style="display: none;">
                <button type="button" class="convert-btn" id="convert-btn">
                    <div class="btn-content">
                        <i data-feather="zap" class="btn-icon"></i>
                        <span class="btn-text">Start Conversion</span>
                    </div>
                    <div class="btn-loading" style="display: none;">
                        <div class="loading-spinner small"></div>
                        <span>Converting...</span>
                    </div>
                </button>
                
                <div class="convert-info">
                    <p class="convert-info-text">
                        <i data-feather="info"></i>
                        Files are processed locally when possible for maximum speed and privacy
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="features-section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Why Choose {{ app_name }}?</h2>
            <p class="section-subtitle">
                Powerful features designed for modern file conversion needs
            </p>
        </div>
        
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">
                    <i data-feather="zap"></i>
                </div>
                <h3 class="feature-title">Lightning Fast</h3>
                <p class="feature-description">
                    Advanced processing engines deliver conversions in seconds, not minutes.
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i data-feather="layers"></i>
                </div>
                <h3 class="feature-title">Batch Processing</h3>
                <p class="feature-description">
                    Convert up to {{ max_files_per_batch }} files simultaneously with our intelligent queue system.
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i data-feather="shield"></i>
                </div>
                <h3 class="feature-title">Privacy First</h3>
                <p class="feature-description">
                    Files are automatically deleted after conversion. We never store your data permanently.
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i data-feather="smartphone"></i>
                </div>
                <h3 class="feature-title">Works Everywhere</h3>
                <p class="feature-description">
                    Responsive design works perfectly on desktop, tablet, and mobile devices.
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i data-feather="cpu"></i>
                </div>
                <h3 class="feature-title">Smart Processing</h3>
                <p class="feature-description">
                    Multiple conversion engines ensure optimal quality and compatibility.
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i data-feather="heart"></i>
                </div>
                <h3 class="feature-title">Always Free</h3>
                <p class="feature-description">
                    No registration, no watermarks, no limits. Professional quality, completely free.
                </p>
            </div>
        </div>
    </div>
</section>

<!-- Stats Section -->
<section class="stats-section">
    <div class="container">
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" data-target="{{ total_supported_formats }}">0</div>
                <div class="stat-label">Supported Formats</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" data-target="{{ max_file_size_mb }}">0</div>
                <div class="stat-label">Max File Size (MB)</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" data-target="{{ max_files_per_batch }}">0</div>
                <div class="stat-label">Batch Size</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" data-target="100">0</div>
                <div class="stat-label">Privacy Score</div>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="cta-section">
    <div class="container">
        <div class="cta-content">
            <h2 class="cta-title">Ready to Convert Your Files?</h2>
            <p class="cta-subtitle">
                Join thousands of users who trust {{ app_name }} for their file conversion needs
            </p>
            <div class="cta-actions">
                <button class="cta-btn primary" onclick="scrollToConverter()">
                    <i data-feather="upload"></i>
                    <span>Start Converting Now</span>
                </button>
                <a href="{{ url_for('main.help_page') }}" class="cta-btn secondary">
                    <i data-feather="help-circle"></i>
                    <span>Learn More</span>
                </a>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/upload.js') }}"></script>
<script src="{{ url_for('static', filename='js/conversion.js') }}"></script>
<script>
// Initialize conversion interface
document.addEventListener('DOMContentLoaded', function() {
    // Initialize upload functionality
    if (typeof initializeUpload === 'function') {
        initializeUpload();
    }
    
    // Initialize conversion functionality
    if (typeof initializeConversion === 'function') {
        initializeConversion();
    }
    
    // Smooth scroll to converter
    window.scrollToConverter = function() {
        document.getElementById('converter').scrollIntoView({
            behavior: 'smooth',
            block: 'start'
        });
    };
    
    // Animate stats on scroll
    const observerOptions = {
        threshold: 0.5,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const statsObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                animateStats();
                statsObserver.unobserve(entry.target);
            }
        });
    }, observerOptions);
    
    const statsSection = document.querySelector('.stats-section');
    if (statsSection) {
        statsObserver.observe(statsSection);
    }
    
    function animateStats() {
        const statNumbers = document.querySelectorAll('.stat-number');
        statNumbers.forEach(stat => {
            const target = parseInt(stat.getAttribute('data-target'));
            let current = 0;
            const increment = target / 50;
            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    current = target;
                    clearInterval(timer);
                }
                stat.textContent = Math.floor(current);
            }, 30);
        });
    }
});
</script>
{% endblock %}